{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Fashion Flare</title>
     <link rel="stylesheet" href="{% static 'css/output.css' %}">
</head>

<body class="bg-white text-gray-900">

<header class="border-b border-gray-200 sticky top-0 z-50 bg-white/90 backdrop-blur">

  <div class="max-w-[1400px] mx-auto px-10 py-8 flex justify-between items-center">

    <!-- LOGO -->
    <a href="/" class="text-xs tracking-[0.25em] uppercase font-light">
      THE FASHION FLARE
    </a>

    <!-- DESKTOP NAV -->
    <nav class="hidden md:flex gap-14 text-[11px] tracking-[0.2em] uppercase text-gray-500">
      <a href="/" class="hover:text-black transition">All</a>
      {% for cat in categories %}
        <a href="/?category={{ cat.slug }}" class="hover:text-black transition">
          {{ cat.name }}
        </a>
      {% endfor %}
    </nav>

    <!-- RIGHT -->
    <form method="get" action="{% url 'product_search' %}" class="hidden md:block relative">

  <input
    type="text"
    name="q"
    placeholder="Search"
    class="w-44 text-xs tracking-widest uppercase
           border-b border-gray-300
           bg-transparent outline-none
           py-1 pr-6
           focus:border-black transition"
    value="{{ request.GET.q }}"
  >
  <span class="absolute right-0 top-1 text-gray-400 text-xs">âŒ•</span>
</form>


      <!-- ACCOUNT (DESKTOP ONLY) -->
      <div class="relative group hidden md:block">

        <button class="flex items-center gap-1 whitespace-nowrap hover:text-black transition">
          {% if user.is_authenticated %}
            <span class="font-normal">Hi,</span>
            <span class="font-medium">{{ user.username }}</span>
          {% else %}
            <span>Account</span>
          {% endif %}

          <span class="ml-1 text-xs text-gray-500 transition-transform duration-200 group-hover:rotate-180">
            â–¼
          </span>
        </button>

        <!-- DROPDOWN -->
        <div
          class="absolute right-0 mt-3 w-48 bg-white shadow-xl rounded-xl overflow-hidden
                 opacity-0 invisible translate-y-1
                 group-hover:opacity-100 group-hover:visible group-hover:translate-y-0
                 transition-all duration-200 z-50">

          {% if user.is_authenticated %}
            <a href="{% url 'accounts:profile' %}" class="block px-4 py-3 hover:bg-gray-100">Profile</a>
            <a href="{% url 'accounts:wishlist' %}" class="block px-4 py-3 hover:bg-gray-100">Wishlist</a>
            <a href="{% url 'accounts:orders' %}" class="block px-4 py-3 hover:bg-gray-100">Orders</a>
            <div class="border-t"></div>
            <a href="{% url 'logout' %}" class="block px-4 py-3 text-red-500 hover:bg-gray-100">Logout</a>
          {% else %}
            <a href="{% url 'login' %}" class="block px-4 py-3 hover:bg-gray-100">Login</a>
            <a href="{% url 'register' %}" class="block px-4 py-3 hover:bg-gray-100">Register</a>
          {% endif %}

        </div>
      </div>

      <!-- CART -->
      <a href="{% url 'cart_detail' %}" class="relative text-gray-700 hover:text-black transition">
        ðŸ›’
        {% if cart_count %}
          <span class="absolute -top-2 -right-2 bg-black text-white text-xs rounded-full px-1.5 py-0.5">
            {{ cart_count }}
          </span>
        {% endif %}
      </a>

      <!-- MOBILE MENU BUTTON -->
      <button id="mobileMenuBtn" class="md:hidden text-xl text-gray-700">
        â˜°
      </button>

    </div>
  </div>

  <!-- MOBILE MENU -->
  <div id="mobileMenu" class="md:hidden hidden border-t border-gray-200 bg-white">

    <div class="px-10 py-6 space-y-5 text-xs uppercase tracking-widest text-gray-600">

      <a href="/" class="block hover:text-black">All</a>

      {% for cat in categories %}
        <a href="/?category={{ cat.slug }}" class="block hover:text-black">
          {{ cat.name }}
        </a>
      {% endfor %}

      <div class="border-t pt-4 space-y-3">
        {% if user.is_authenticated %}
          <a href="{% url 'accounts:profile' %}" class="block">Profile</a>
          <a href="{% url 'accounts:wishlist' %}" class="block">Wishlist</a>
          <a href="{% url 'accounts:orders' %}" class="block">Orders</a>
          <a href="{% url 'logout' %}" class="block text-red-500">Logout</a>
        {% else %}
          <a href="{% url 'login' %}" class="block">Login</a>
          <a href="{% url 'register' %}" class="block">Register</a>
        {% endif %}
      </div>

    </div>
  </div>

</header>



{% if hero_slides %}
<section class="relative w-full h-[75vh] overflow-hidden">

  {% for slide in hero_slides %}
    <div
      class="hero-slide absolute inset-0 opacity-0 transition-opacity duration-1000 ease-in-out
             {% if forloop.first %}opacity-100{% endif %}"
    >
      <!-- Background Image -->
      <img
        src="{{ slide.image.url }}"
        alt="{{ slide.title }}"
        class="w-full h-full object-cover"
      />

      <!-- Dark overlay -->
      <div class="absolute inset-0 bg-black/40"></div>

      <!-- Text content (OLD STYLE) -->
      <div class="absolute inset-0 flex items-center">
    <div class="max-w-[1400px] mx-auto px-10 w-full text-white">
          <p class="tracking-[0.3em] text-sm uppercase mb-3 animate-fade-up">
            {{ slide.tag }}
          </p>

          <h1 class="text-4xl md:text-6xl font-light leading-tight animate-fade-up delay-100">
            {{ slide.title }}
          </h1>

          <p class="mt-4 max-w-xl text-white/80 animate-fade-up delay-200">
            {{ slide.description }}
          </p>
        </div>
      </div>
    </div>
  {% endfor %}

</section>
{% endif %}





<!-- HERO VIDEO -->

{% if home_video %}
<section class="w-full bg-black mt-8 md:mt-12">


  <div class="relative w-full h-[70vh] overflow-hidden">

    <video autoplay muted loop playsinline
           class="absolute inset-0 w-full h-full object-cover">
      <source src="{{ home_video.video.url }}" type="video/mp4">
    </video>

    <div class="absolute inset-0 bg-black/30"></div>

    {% if home_video.title or home_video.subtitle %}
   <div class="absolute inset-0 flex items-center">
    <div class="max-w-[1400px] mx-auto px-10 w-full text-white">
        {% if home_video.title %}
          <h2 class="text-3xl md:text-5xl font-light">
            {{ home_video.title }}
          </h2>
        {% endif %}
        {% if home_video.subtitle %}
          <p class="mt-4 text-white/80 max-w-xl">
            {{ home_video.subtitle }}
          </p>
        {% endif %}
      </div>
    </div>
    {% endif %}

  </div>
</section>
{% endif %}




{% if active_category == "mens" %}
<div class="max-w-[1400px] mx-auto px-10 mt-12 flex gap-10 text-xs uppercase tracking-widest text-gray-500">
    <a href="?category=mens" class="hover:text-black">All</a>
    <a href="?category=mens&sub=tshirts" class="hover:text-black">T-Shirts</a>
    <a href="?category=mens&sub=jackets" class="hover:text-black">Jackets</a>
    <a href="?category=mens&sub=jeans" class="hover:text-black">Jeans</a>
</div>
{% endif %}


<!-- PRODUCTS -->
<section class="max-w-[1400px] mx-auto px-10 py-24">

    <h2 class="text-xs tracking-[0.3em] uppercase mb-16">
    {% if active_category %}
        {{ active_category }} products
    {% else %}
        Products
    {% endif %}
</h2>


{% if products %}
<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-x-10 gap-y-24 animate-slide">

  {% for product in products %}
  <a href="{% url 'product_detail' product.slug %}"
     class="group block transition-transform duration-300 hover:-translate-y-1">

    {% if product.images.first %}
    <div class="relative overflow-hidden mb-5 bg-[#f7f7f7]">

      <!-- IMAGE -->
      <img src="{{ product.images.first.image.url }}"
           class="w-full h-[420px] object-cover
                  transition-transform duration-700 ease-out
                  group-hover:scale-105">

      <!-- SECOND IMAGE -->
      {% if product.images.all|length > 1 %}
      <img src="{{ product.images.all.1.image.url }}"
           class="w-full h-[420px] object-cover absolute inset-0
                  opacity-0 group-hover:opacity-100
                  transition-opacity duration-700">
      {% endif %}

      <!-- OVERLAY -->
      <div class="absolute inset-0 bg-black/0
                  group-hover:bg-black/5
                  transition-colors duration-500"></div>

    </div>
    {% endif %}

    <!-- PRODUCT NAME -->
    <p class="text-sm font-light mb-1
              transition-colors duration-300
              group-hover:text-black">
      {{ product.name }}
    </p>

    <!-- PRICE -->
    {% if product.discount_price %}
      <p class="text-sm">
        â‚¹ {{ product.discount_price }}
        <span class="text-gray-400 line-through ml-2">
          â‚¹ {{ product.price }}
        </span>
      </p>
    {% else %}
      <p class="text-sm text-gray-600">
        â‚¹ {{ product.price }}
      </p>
    {% endif %}

  </a>
  {% endfor %}

</div>
{% else %}
<p class="text-sm text-gray-500">No products available</p>
{% endif %}



<!-- FOOTER -->
<footer class="bg-[#fafafa] mt-32">

  <!-- MAIN FOOTER -->
  <div class="max-w-[1400px] mx-auto px-10 py-20
              grid grid-cols-1 md:grid-cols-4 gap-16">

    <!-- BRAND -->
    <div class="md:col-span-1">
      <p class="text-xs tracking-[0.3em] uppercase mb-6 text-black">
        The Fashion Flare
      </p>

      <p class="text-sm text-gray-600 leading-7 max-w-xs">
        Contemporary fashion designed for everyday confidence.
        Premium fabrics, modern silhouettes, and timeless style.
      </p>
    </div>

    <!-- SHOP -->
    <div>
      <p class="text-xs tracking-[0.3em] uppercase mb-6 text-black">
        Shop
      </p>
      <ul class="space-y-4 text-sm text-gray-600">
        <li><a href="#" class="hover:text-black transition">Men</a></li>
        <li><a href="#" class="hover:text-black transition">Women</a></li>
        <li><a href="#" class="hover:text-black transition">New Arrivals</a></li>
      </ul>
    </div>

    <!-- SUPPORT -->
    <div>
      <p class="text-xs tracking-[0.3em] uppercase mb-6 text-black">
        Support
      </p>
      <ul class="space-y-4 text-sm text-gray-600">
        <li><a href="#" class="hover:text-black transition">Contact</a></li>
        <li><a href="#" class="hover:text-black transition">Shipping & Returns</a></li>
        <li><a href="#" class="hover:text-black transition">Size Guide</a></li>
      </ul>
    </div>

    <!-- NEWSLETTER -->
    <div>
      <p class="text-xs tracking-[0.3em] uppercase mb-6 text-black">
        Newsletter
      </p>

      <p class="text-sm text-gray-600 mb-6">
        Get early access to new collections.
      </p>

      <div class="flex items-center border-b border-gray-400">
        <input
          type="email"
          placeholder="Email address"
          class="flex-1 bg-transparent py-2 text-sm
                 outline-none focus:border-black"
        >
        <button
          class="text-xs uppercase tracking-widest text-gray-500
                 hover:text-black transition">
          â†’
        </button>
      </div>
    </div>

  </div>

  <!-- BOTTOM BAR -->
  <div class="border-t border-gray-200">
    <div class="max-w-[1400px] mx-auto px-10 py-8
                flex flex-col md:flex-row
                items-center justify-between
                text-xs text-gray-500 gap-4">

      <p>Â© 2026 The Fashion Flare. All rights reserved.</p>

      <div class="flex gap-6">
        <a href="#" class="hover:text-black">Privacy</a>
        <a href="#" class="hover:text-black">Terms</a>
        <a href="#" class="hover:text-black">Cookies</a>
      </div>
    </div>
  </div>

</footer>




<div id="quickView"
     class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">

  <div class="bg-white dark:bg-[#111] w-[90%] max-w-xl p-10 relative">

    <button onclick="closeQuickView()"
            class="absolute top-4 right-4 text-xl">&times;</button>

    <img id="qvImage" class="w-full h-[400px] object-cover mb-6">
    <h3 id="qvName" class="text-lg mb-2"></h3>
    <p id="qvPrice" class="text-sm text-gray-600 dark:text-gray-400"></p>
    

  </div>
</div>


<script>
const slides = document.querySelectorAll(".hero-slide");
let currentSlide = 0;

setInterval(() => {
  slides[currentSlide].classList.remove("opacity-100");
  slides[currentSlide].classList.add("opacity-0");

  currentSlide = (currentSlide + 1) % slides.length;

  slides[currentSlide].classList.remove("opacity-0");
  slides[currentSlide].classList.add("opacity-100");
}, 4500);
</script>





<script>
function openQuickView(img, name, price) {
  document.getElementById("qvImage").src = img;
  document.getElementById("qvName").innerText = name;
  document.getElementById("qvPrice").innerText = price;
  document.getElementById("quickView").classList.remove("hidden");
  document.getElementById("quickView").classList.add("flex");
}

function closeQuickView() {
  document.getElementById("quickView").classList.add("hidden");
}
</script>

<script>
const menuBtn = document.getElementById("mobileMenuBtn");
const mobileMenu = document.getElementById("mobileMenu");

if (menuBtn) {
  menuBtn.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
  });
}
</script>


</body>
</html>