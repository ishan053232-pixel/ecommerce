{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Fashion Flare</title>
     <link rel="stylesheet" href="{% static 'css/output.css' %}">
</head>

<body class="bg-white text-gray-900">

<header class="border-b border-gray-200 sticky top-0 z-50 bg-white/90 backdrop-blur">

  <div class="max-w-[1400px] mx-auto px-10 py-8 flex justify-between items-center">

    <!-- LOGO -->
    <a href="/" class="text-xs tracking-[0.25em] uppercase font-light">
      THE FASHION FLARE
    </a>

    <!-- DESKTOP NAV -->
    <nav class="hidden md:flex gap-14 text-[11px] tracking-[0.2em] uppercase text-gray-500">
      <a href="/" class="hover:text-black transition">All</a>
      {% for cat in categories %}
        <a href="/?category={{ cat.slug }}" class="hover:text-black transition">
          {{ cat.name }}
        </a>
      {% endfor %}
    </nav>

    <!-- RIGHT -->
    <form method="get" action="{% url 'product_search' %}" class="hidden md:block relative">

  <input
    type="text"
    name="q"
    placeholder="Search"
    class="w-44 text-xs tracking-widest uppercase
           border-b border-gray-300
           bg-transparent outline-none
           py-1 pr-6
           focus:border-black transition"
    value="{{ request.GET.q }}"
  >
  <span class="absolute right-0 top-1 text-gray-400 text-xs">âŒ•</span>
</form>


      <!-- ACCOUNT (DESKTOP ONLY) -->
      <div class="relative group hidden md:block">

        <button class="flex items-center gap-1 whitespace-nowrap hover:text-black transition">
          {% if user.is_authenticated %}
            <span class="font-normal">Hi,</span>
            <span class="font-medium">{{ user.username }}</span>
          {% else %}
            <span>Account</span>
          {% endif %}

          <span class="ml-1 text-xs text-gray-500 transition-transform duration-200 group-hover:rotate-180">
            â–¼
          </span>
        </button>

        <!-- DROPDOWN -->
        <div
          class="absolute right-0 mt-3 w-48 bg-white shadow-xl rounded-xl overflow-hidden
                 opacity-0 invisible translate-y-1
                 group-hover:opacity-100 group-hover:visible group-hover:translate-y-0
                 transition-all duration-200 z-50">

          {% if user.is_authenticated %}
            <a href="{% url 'accounts:profile' %}" class="block px-4 py-3 hover:bg-gray-100">Profile</a>
            <a href="{% url 'accounts:wishlist' %}" class="block px-4 py-3 hover:bg-gray-100">Wishlist</a>
            <a href="{% url 'accounts:orders' %}" class="block px-4 py-3 hover:bg-gray-100">Orders</a>
            <div class="border-t"></div>
            <a href="{% url 'logout' %}" class="block px-4 py-3 text-red-500 hover:bg-gray-100">Logout</a>
          {% else %}
            <a href="{% url 'login' %}" class="block px-4 py-3 hover:bg-gray-100">Login</a>
            <a href="{% url 'register' %}" class="block px-4 py-3 hover:bg-gray-100">Register</a>
          {% endif %}

        </div>
      </div>

      <!-- CART -->
      <a href="{% url 'cart_detail' %}" class="relative text-gray-700 hover:text-black transition">
        ðŸ›’
        {% if cart_count %}
          <span class="absolute -top-2 -right-2 bg-black text-white text-xs rounded-full px-1.5 py-0.5">
            {{ cart_count }}
          </span>
        {% endif %}
      </a>

      <!-- MOBILE MENU BUTTON -->
      <button id="mobileMenuBtn" class="md:hidden text-xl text-gray-700">
        â˜°
      </button>

    </div>
  </div>

  <!-- MOBILE MENU -->
  <div id="mobileMenu" class="md:hidden hidden border-t border-gray-200 bg-white">

    <div class="px-10 py-6 space-y-5 text-xs uppercase tracking-widest text-gray-600">

      <a href="/" class="block hover:text-black">All</a>

      {% for cat in categories %}
        <a href="/?category={{ cat.slug }}" class="block hover:text-black">
          {{ cat.name }}
        </a>
      {% endfor %}

      <div class="border-t pt-4 space-y-3">
        {% if user.is_authenticated %}
          <a href="{% url 'accounts:profile' %}" class="block">Profile</a>
          <a href="{% url 'accounts:wishlist' %}" class="block">Wishlist</a>
          <a href="{% url 'accounts:orders' %}" class="block">Orders</a>
          <a href="{% url 'logout' %}" class="block text-red-500">Logout</a>
        {% else %}
          <a href="{% url 'login' %}" class="block">Login</a>
          <a href="{% url 'register' %}" class="block">Register</a>
        {% endif %}
      </div>

    </div>
  </div>

</header>



<!-- HERO -->
<section class="relative w-full h-[80vh] overflow-hidden">


  <div class="relative h-[620px] overflow-hidden">

 {% for slide in slides_qs %}
  <img src="{{ slide.image.url }}"
       class="hero-slide absolute inset-0 w-full h-full object-cover
              {% if forloop.first %}opacity-100{% else %}opacity-0{% endif %}
              transition-opacity duration-1000">
{% endfor %}


  <div class="absolute inset-0 flex items-center">
  <div class="ml-20 max-w-xl text-white z-10">

    <p id="heroTag"
       class="text-xs tracking-[0.35em] uppercase mb-4 opacity-0 translate-y-4 transition-all duration-700"></p>

    <h1 id="heroTitle"
    class="text-4xl md:text-5xl font-light leading-tight">
</h1>

    <p id="heroDesc"
       class="text-sm text-gray-200 mt-4 leading-relaxed opacity-0 translate-y-6 transition-all duration-700 delay-200"></p>
  </div>

  <div class="absolute inset-0 bg-black/20"></div>
</div>


</section>






<!-- HERO TEXT -->
<section class="max-w-[1400px] mx-auto px-10 mt-16">
    <p class="max-w-xl text-sm text-gray-600 leading-relaxed">
        Thoughtfully designed garments crafted with refined materials,
        timeless silhouettes, and effortless everyday comfort.
    </p>
</section>

{% if active_category == "mens" %}
<div class="max-w-[1400px] mx-auto px-10 mt-12 flex gap-10 text-xs uppercase tracking-widest text-gray-500">
    <a href="?category=mens" class="hover:text-black">All</a>
    <a href="?category=mens&sub=tshirts" class="hover:text-black">T-Shirts</a>
    <a href="?category=mens&sub=jackets" class="hover:text-black">Jackets</a>
    <a href="?category=mens&sub=jeans" class="hover:text-black">Jeans</a>
</div>
{% endif %}


<!-- PRODUCTS -->
<section class="max-w-[1400px] mx-auto px-10 py-24">

    <h2 class="text-xs tracking-[0.3em] uppercase mb-16">
    {% if active_category %}
        {{ active_category }} products
    {% else %}
        Products
    {% endif %}
</h2>


    {% if products %}
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-x-10 gap-y-24 animate-slide">


        {% for product in products %}
        <a href="{% url 'product_detail' product.slug %}" class="group">

            {% if product.images.first %}
            <div class="relative overflow-hidden mb-5">

    <img src="{{ product.images.first.image.url }}"
         class="w-full h-[420px] object-cover transition-opacity duration-700">

    {% if product.images.all|length > 1 %}
    <img src="{{ product.images.all.1.image.url }}"
         class="w-full h-[420px] object-cover absolute inset-0
                opacity-0 group-hover:opacity-100 transition-opacity duration-700">
    {% endif %}

</div>

            {% endif %}

            <p class="text-sm font-light mb-1">
                {{ product.name }}
            </p>

            {% if product.discount_price %}
                <p class="text-sm">
                    â‚¹ {{ product.discount_price }}
                    <span class="text-gray-400 line-through ml-2">
                        â‚¹ {{ product.price }}
                    </span>
                </p>
            {% else %}
                <p class="text-sm text-gray-600">
                    â‚¹ {{ product.price }}
                </p>
            {% endif %}

        </a>
        {% endfor %}

    </div>
    {% else %}
        <p class="text-sm text-gray-500">No products available</p>
    {% endif %}
</section>


<!-- FOOTER -->
<footer class="border-t border-gray-200 mt-32">
    <div class="max-w-[1400px] mx-auto px-10 py-20
                grid grid-cols-2 md:grid-cols-4 gap-16
                text-sm text-gray-600">

        <div>
            <p class="text-xs tracking-[0.25em] uppercase mb-6 text-black">
                Shop
            </p>
            <ul class="space-y-3">
                <li>Men</li>
                <li>Women</li>
                <li>Kids</li>
            </ul>
        </div>

        <div>
            <p class="text-xs tracking-[0.25em] uppercase mb-6 text-black">
                Support
            </p>
            <ul class="space-y-3">
                <li>Contact</li>
                <li>Returns</li>
                <li>Shipping</li>
            </ul>
        </div>

        <div>
            <p class="text-xs tracking-[0.25em] uppercase mb-6 text-black">
                About
            </p>
            <ul class="space-y-3">
                <li>Our Story</li>
                <li>Sustainability</li>
            </ul>
        </div>

        <div>
            <p class="text-xs tracking-[0.25em] uppercase mb-6 text-black">
                Newsletter
            </p>
            <input type="email"
                   placeholder="Email address"
                   class="w-full border-b border-gray-400 py-2
                          outline-none text-sm bg-transparent">
        </div>

    </div>

    <div class="text-center text-xs text-gray-500 py-8">
        Â© 2025 THE FASHION FLARE
    </div>
</footer>


<div id="quickView"
     class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">

  <div class="bg-white dark:bg-[#111] w-[90%] max-w-xl p-10 relative">

    <button onclick="closeQuickView()"
            class="absolute top-4 right-4 text-xl">&times;</button>

    <img id="qvImage" class="w-full h-[400px] object-cover mb-6">
    <h3 id="qvName" class="text-lg mb-2"></h3>
    <p id="qvPrice" class="text-sm text-gray-600 dark:text-gray-400"></p>
    

  </div>
</div>

{{ slides|json_script:"hero-data" }}

<script>
const slides = document.querySelectorAll(".hero-slide");
const heroData = JSON.parse(
  document.getElementById("hero-data").textContent
);

const heroTag = document.getElementById("heroTag");
const heroTitle = document.getElementById("heroTitle");
const heroDesc = document.getElementById("heroDesc");

let current = 0;


function showSlide(index) {
  slides.forEach((slide, i) => {
    slide.classList.toggle("opacity-100", i === index);
    slide.classList.toggle("opacity-0", i !== index);
  });

  [heroTag, heroTitle, heroDesc].forEach(el => {
    el.classList.add("opacity-0", "translate-y-6");
  });

  setTimeout(() => {
    heroTag.innerText = heroData[index].tag;
    heroTitle.innerText = heroData[index].title;
    heroDesc.innerText = heroData[index].description;

    [heroTag, heroTitle, heroDesc].forEach(el => {
      el.classList.remove("opacity-0", "translate-y-6");
    });
  }, 400);
}


// INIT
showSlide(0);

// AUTO SLIDE
setInterval(() => {
  current = (current + 1) % slides.length;
  showSlide(current);
}, 4500);
</script>




<script>
function openQuickView(img, name, price) {
  document.getElementById("qvImage").src = img;
  document.getElementById("qvName").innerText = name;
  document.getElementById("qvPrice").innerText = price;
  document.getElementById("quickView").classList.remove("hidden");
  document.getElementById("quickView").classList.add("flex");
}

function closeQuickView() {
  document.getElementById("quickView").classList.add("hidden");
}
</script>

<script>
const menuBtn = document.getElementById("mobileMenuBtn");
const mobileMenu = document.getElementById("mobileMenu");

if (menuBtn) {
  menuBtn.addEventListener("click", () => {
    mobileMenu.classList.toggle("hidden");
  });
}
</script>





</body>
</html>
