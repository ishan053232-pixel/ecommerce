<header class="border-b border-gray-200 sticky top-0 z-50 bg-white/90 backdrop-blur">

  <div class="max-w-[1400px] mx-auto px-10 py-8 flex justify-between items-center">

    <!-- LOGO -->
    <a href="/" class="text-xs tracking-[0.25em] uppercase font-light">
      THE FASHION FLARE
    </a>

    <!-- DESKTOP NAV -->
    <nav class="hidden md:flex gap-14 text-[11px] tracking-[0.2em] uppercase text-gray-500">
      <a href="/" class="hover:text-black transition">All</a>
      {% for cat in categories %}
        <a href="/?category={{ cat.slug }}" class="hover:text-black transition">
          {{ cat.name }}
        </a>
      {% endfor %}
    </nav>

    <!-- RIGHT -->
    <form method="get" action="{% url 'product_search' %}" class="hidden md:block relative">

  <input
    type="text"
    name="q"
    placeholder="Search"
    class="w-44 text-xs tracking-widest uppercase
           border-b border-gray-300
           bg-transparent outline-none
           py-1 pr-6
           focus:border-black transition"
    value="{{ request.GET.q }}"
  >
  <span class="absolute right-0 top-1 text-gray-400 text-xs">âŒ•</span>
</form>


      <!-- ACCOUNT (DESKTOP ONLY) -->
      <div class="relative group hidden md:block">

        <button class="flex items-center gap-1 whitespace-nowrap hover:text-black transition">
          {% if user.is_authenticated %}
            <span class="font-normal">Hi,</span>
            <span class="font-medium">{{ user.username }}</span>
          {% else %}
            <span>Account</span>
          {% endif %}

          <span class="ml-1 text-xs text-gray-500 transition-transform duration-200 group-hover:rotate-180">
            â–¼
          </span>
        </button>

        <!-- DROPDOWN -->
        <div
          class="absolute right-0 mt-3 w-48 bg-white shadow-xl rounded-xl overflow-hidden
                 opacity-0 invisible translate-y-1
                 group-hover:opacity-100 group-hover:visible group-hover:translate-y-0
                 transition-all duration-200 z-50">

          {% if user.is_authenticated %}
            <a href="{% url 'accounts:profile' %}" class="block px-4 py-3 hover:bg-gray-100">Profile</a>
            <a href="{% url 'accounts:wishlist' %}" class="block px-4 py-3 hover:bg-gray-100">Wishlist</a>
            <a href="{% url 'accounts:orders' %}" class="block px-4 py-3 hover:bg-gray-100">Orders</a>
            <div class="border-t"></div>
            <a href="{% url 'logout' %}" class="block px-4 py-3 text-red-500 hover:bg-gray-100">Logout</a>
          {% else %}
            <a href="{% url 'login' %}" class="block px-4 py-3 hover:bg-gray-100">Login</a>
            <a href="{% url 'register' %}" class="block px-4 py-3 hover:bg-gray-100">Register</a>
          {% endif %}

        </div>
      </div>

      <!-- CART -->
      <a href="{% url 'cart_detail' %}" class="relative text-gray-700 hover:text-black transition">
        ðŸ›’
        {% if cart_count %}
          <span class="absolute -top-2 -right-2 bg-black text-white text-xs rounded-full px-1.5 py-0.5">
            {{ cart_count }}
          </span>
        {% endif %}
      </a>

      <!-- MOBILE MENU BUTTON -->
      <button id="mobileMenuBtn" class="md:hidden text-xl text-gray-700">
        â˜°
      </button>

    </div>
  </div>

  <!-- MOBILE MENU -->
  <div id="mobileMenu" class="md:hidden hidden border-t border-gray-200 bg-white">

    <div class="px-10 py-6 space-y-5 text-xs uppercase tracking-widest text-gray-600">

      <a href="/" class="block hover:text-black">All</a>

      {% for cat in categories %}
        <a href="/?category={{ cat.slug }}" class="block hover:text-black">
          {{ cat.name }}
        </a>
      {% endfor %}

      <div class="border-t pt-4 space-y-3">
        {% if user.is_authenticated %}
          <a href="{% url 'accounts:profile' %}" class="block">Profile</a>
          <a href="{% url 'accounts:wishlist' %}" class="block">Wishlist</a>
          <a href="{% url 'accounts:orders' %}" class="block">Orders</a>
          <a href="{% url 'logout' %}" class="block text-red-500">Logout</a>
        {% else %}
          <a href="{% url 'login' %}" class="block">Login</a>
          <a href="{% url 'register' %}" class="block">Register</a>
        {% endif %}
      </div>

    </div>
  </div>

</header>